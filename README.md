# Unigreen Energy Test Task

## Содержание
- [Описание](#описание)
- [Установка](#установка)
- [Использование](#использование)
- [Структура проекта](#структура-проекта)
- [Линтинг](#разработчикам)

## Описание

Этот тестовое задание представляет собой скрипт для скачивания и обработки отчетов по ценам для определенной ценовой зоны и региона. Скрипт собирает данные по дням, рассчитывает средние значения по указанному параметру и сохраняет результаты в различные форматы: CSV, Excel, и XML.
**Ценовая зона, регион, даты, часы и параметр для расчёта гибко настаиваются.**

## Установка


1. **Клонируйте репозиторий и перейдите в папку со скриптом:**
    ```bash
    git git@github.com:KirGorbunov/unigreen-test-task.git
    cd unigreen-test-task
    ```


2. **Создайте виртуальное окружение:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/MacOS
    venv\Scripts\activate   # Для Windows
    ```

3. **Установите зависимости (для pip): **
    ```bash
    pip install -r requirements.txt
    ```
   **Установите зависимости (для poetry): **
    ```bash
    poetry install
    ```

4. **Скопируйте файл `.env.example` в `.env`:**
    ```bash
    cp .env.example .env  # Linux/MacOS
    copy .env.example .env  # Windows
    ```
   
## Использование

1. **Запуск программы:**
    ```bash
    python script.py
    ```

2. **Настройки содержатся в файле .env:**
    - START_DATE=02-09-2024 # Дата начала периода загружаемых отчётов (в формате ДД-ММ-ГГГГ) (включительно)
    - END_DATE=09-09-2024 # Дата окончания периода загружаемых отчётов (в формате ДД-ММ-ГГГГ) (включительно)
    - HOURS_START=2   # Час начала (включительно)
    - HOURS_END=15    # Час окончания (включительно)
    - TARGET_REGION=Республика Бурятия # Регион, для которого вычисляются средние значения
    - PRICE_ZONE=eur # Ценовая зона, в которой находится регион (eur, sib или dv)
    - PRICE_FOR_CALCULATED=Равновесная узловая цена, руб./МВт∙ч # Параметр из отчёта для которого будет рассчитываться среднее значение
   
    - BASE_URL=https://www.atsenergo.ru/nreport  # Базовый URL для получения данных
    - DOWNLOAD_REPORTS_DIR=download_reports  # Директория, куда будут загружаться отчёты
    - AVERAGE_REPORTS_DIR=average_prices_reports  # Директория, куда будут сохраняться создаваемые отчёты


## Структура проекта

```
├── logger_config.py    # Настройки логирования
├── poetry.lock         # Файл блокировки Poetry
├── pyproject.toml      # Конфигурация Poetry
├── README.md           # Документация скрипта
├── requirements.txt    # Зависимости для pip
├── script.py           # Основной скрипт для скачивания и формирования отчёта со средней ценой
└── settings.py         # Настройки pydentic-settings
```

## Линтинг
Для линтинга использовался инструмент `ruff`, который устанавливается автоматически через Poetry и pip:
    ```
    ruff check
    ```